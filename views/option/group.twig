{# macro for generating option groups for a single tab body#}
{% macro create(optionGroups, isProfile) %}
    {% set ADI_I18N = constant('ADI_I18N') %}

    <script type="application/javascript">
        document['adi2'] = document['adi2'] || {};
        document['adi2']['auth-code-confirmation'] = '{{ 'Do you really want to regenerate a new AuthCode?'|__(ADI_I18N) }}';
        document['adi2']['verification-status'] = '{{ 'WordPress Site is currently connected to Domain: '|__(ADI_I18N) }}';
        document['adi2']['verification-successful'] = '{{ 'Verification successful! WordPress site is now connected to Domain: '|__(ADI_I18N) }}';
        document['adi2']['verification-successful-notification'] = '{{ 'Verification successful!'|__(ADI_I18N) }}';
        document['adi2']['verification-failed-notification'] = '{{ 'Verification failed! Please check your logfile for further information.'|__(ADI_I18N) }}';
    </script>

    {% import "option/lines.twig" as lines %}
    {% set ADI_I18N = constant('ADI_I18N') %}
    {% set newNetwork = isOnNetworkDashboard() %}

    {# Add all option groups of the current tab #}
    {% for optionGroupName, optionGroup in optionGroups %}

        {# Display the optionGroupName if it is not empty#}
        {% if optionGroupName and (optionGroupName != 'angular_controller' and optionGroupName != 'multisite_only') %}

                <h2>{{ optionGroupName }}</h2>

        {% endif %}

        {# Add the description or the array of descriptions to this option group #}
        {% if optionGroup.description is defined %}
            {{ optionGroup.description|join('<br>')|raw }}
            {% if optionGroupName is defined and newNetwork%}
                <table class="adi-permission-selection">
                    <tr>
                        <td>&nbsp;</td>
                        <td>{{ 'Manage Permissions'|__(ADI_I18N) }}</td>
                    </tr>
                </table>
            {% endif %}
        {% endif %}

        {# Do not add zero options#}
        {% if optionGroup.options is defined %}
            {# Add all option of this option group#}
            <table class="form-table" style="width: 100%">
                {{ lines.create(optionGroup.options, isProfile) }}
            </table>
        {% endif %}

    {% endfor %}

{% endmacro %}